<div class="cart-section">
    <h3><i class="fas fa-shopping-basket"></i> Cart (<%= purchases.length %> items)</h3>
    <% if (purchases && purchases.length > 0) { %>
      <div style="margin-bottom: 1rem; text-align: right;">
        <form action="/clear-cart" method="POST" style="display: inline-block;">
          <button type="submit" class="btn-danger" style="background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">
            <i class="fas fa-trash"></i> Clear Cart
          </button>
        </form>
      </div>
      <ul style="list-style: none; padding: 0; margin-bottom: 1rem;">
        <% purchases.forEach((purchase, index) => { %>
          <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
            <span><%= purchase.medicine %> - <%= purchase.quantity %> tablets</span>
            <form action="/remove-from-cart" method="POST" style="display: inline-block;">
              <input type="hidden" name="index" value="<%= index %>">
              <button type="submit" style="background: none; border: none; color: #e74c3c; cursor: pointer; font-size: 0.9rem;">Remove</button>
            </form>
          </li>
        <% }); %>
      </ul>
      <form action="/buy" method="POST" style="margin-top: 1rem;">
        <button type="submit" class="btn-primary" style="background: #27ae60; color: white; border: none; padding: 10px 15px; border-radius: 4px; cursor: pointer; width: 100%;">
          <i class="fas fa-credit-card"></i> Checkout & Generate Receipts
        </button>
      </form>
    <% } else { %>
      <p style="text-align: center; color: #777; padding: 1rem 0;">Your cart is empty. Add some medicines!</p>
    <% } %>
  </div>
  